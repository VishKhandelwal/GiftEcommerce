{% extends 'admin/base_site.html' %}
{% load static %}

{% block content %}
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
    }

    .admin-back-link {
        display: inline-block;
        margin-bottom: 20px;
        text-decoration: none;
        color: #007bff;
        font-weight: 600;
        transition: color 0.2s ease;
    }

    .admin-back-link:hover {
        color: #0056b3;
    }

    h2, h3 {
        color: #2d3436;
        margin-top: 30px;
        font-weight: 700;
    }

    .dashboard-stats {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        margin-top: 20px;
        margin-bottom: 30px;
    }

    .stat-box {
        flex: 1 1 220px;
        display: flex;
        align-items: center;
        background: linear-gradient(135deg, #dfe6e9, #f1f2f6);
        border-left: 6px solid #007bff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.06);
        transition: transform 0.2s ease;
    }

    .stat-box:hover {
        transform: translateY(-3px);
    }

    .stat-icon {
        font-size: 24px;
        margin-right: 15px;
        color: #007bff;
    }

    .stat-content strong {
        font-size: 1.5rem;
        color: #2d3436;
        display: block;
    }

    .stat-content span {
        font-size: 0.9rem;
        color: #636e72;
    }

    ul.top-products {
        list-style: none;
        padding: 0;
    }

    ul.top-products li {
        background: #f8f9fa;
        padding: 12px 16px;
        margin-bottom: 8px;
        border-radius: 6px;
        border-left: 4px solid #00cec9;
        transition: background 0.3s ease;
    }

    ul.top-products li:hover {
        background: #e2e6ea;
    }

    table.recent-orders {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        border-radius: 6px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .recent-orders th, .recent-orders td {
        padding: 12px 15px;
        text-align: left;
        font-size: 0.95rem;
    }

    .recent-orders th {
        background-color: #007bff;
        color: white;
    }

    .recent-orders tr:nth-child(even) {
        background-color: #f8f9fa;
    }

    .recent-orders tr:hover {
        background-color: #eaf0f1;
    }

    .status-badge {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
        text-transform: capitalize;
        color: white;
    }

    .status-Pending { background: #f39c12; }
    .status-Processing { background: #17a2b8; }
    .status-In { background: #2980b9; }
    .status-Delivered { background: #27ae60; }
</style>

<a href="{% url 'admin:index' %}" class="admin-back-link">‚Üê Back to Django Admin Panel</a>

<h2>Admin Dashboard</h2>

<div class="dashboard-stats">
    <div class="stat-box">
        <div class="stat-icon">üì¶</div>
        <div class="stat-content">
            <strong>{{ total_orders }}</strong>
            <span>Total Orders</span>
        </div>
    </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon">‚è≥</div>
        <div class="stat-content">
            <strong>{{ pending_orders }}</strong>
            <span>Pending Orders</span>
        </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon">üöö</div>
        <div class="stat-content">
            <strong>{{ in_transit_orders }}</strong>
            <span>In Transit</span>
        </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon">‚öôÔ∏è</div>
        <div class="stat-content">
            <strong>{{ processing_orders }}</strong>
            <span>In Processing</span>
        </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-content">
            <strong>{{ delivered_orders }}</strong>
            <span>Delivered</span>
        </div>
    </div>
</div>

<h3>Recent Orders</h3>
<table class="recent-orders">
    <thead>
        <tr>
            <th>Order ID</th>
            <th>User</th>
            <th>Status</th>
            <th>Total</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for order in recent_orders %}
        <tr>
            <td>{{ order.id }}</td>
            <td>{{ order.user.email }}</td>
            <td>{{ order.order.status }}</td>
            <td>‚Çπ{{ order.total_amount }}</td>
            <td>{{ order.created_at|date:"Y-m-d H:i" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
