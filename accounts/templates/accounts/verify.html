{% extends 'base.html' %}
{% block content %}
<div class="container mt-5" style="max-width: 500px;">
  <h2 class="text-center mb-4">✅ Verify OTP</h2>

  <form method="post" action="{% url 'accounts:verify' %}">
    {% csrf_token %}
    <input type="hidden" name="email" value="{{ email }}">
    <input type="hidden" name="next" value="{{ next }}">

    {% if success %}
      <div class="alert alert-success">{{ success }}</div>
    {% endif %}

    {% if error %}
      <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <div class="mb-3">
      <label for="otp">Enter OTP</label>
      <input type="text" name="otp" class="form-control" id="otp" required>
    </div>

    <div class="mb-3">
      <label for="unique_code">Your Unique Code</label>
      <input type="text" name="unique_code" class="form-control" id="unique_code" readonly value="{{ unique_code|default:'' }}">
    </div>

    <!-- ✅ Consent Checkbox -->
    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" name="agree_terms" id="agreeTerms" required>
      <label class="form-check-label" for="agreeTerms">
        I agree to share my personal data for placing the order. The data will not be misused in the future and is safe with the company.
      </label>
    </div>

    <button type="submit" class="btn btn-success w-100">Verify & Continue</button>
  </form>

  <!-- 🔁 Resend OTP Form -->
  <form method="post" action="{% url 'accounts:verify' %}" class="text-center mt-3">
    {% csrf_token %}
    <input type="hidden" name="email" value="{{ email }}">
    <input type="hidden" name="resend_otp" value="1">
    <input type="hidden" name="next" value="{{ next }}">
    <button type="submit" class="btn btn-outline-secondary">Resend OTP</button>
  </form>

  <p class="text-muted text-center mt-3">Note: OTP is valid for 5 minutes.</p>
</div>
{% endblock %}
